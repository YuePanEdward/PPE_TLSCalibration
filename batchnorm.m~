function norm_vec= batchnorm(Mat)
% batchnorm: calculate the norm of a matrix in batch
%   Input:  xyz (n x 3) 'cart_points' in cartesian coordinate system
%   Output: rho theta alpha (n x 3) 'pol_points' in polar coordinate
%   system, angle unit: rad

Mat

rho = vectornorm(cart_points);                                  % range
theta = atan2(cart_points(:,2),cart_points(:,1));               % horizontal angle (rad)
alpha = atan2(cart_points(:,3),vectornorm(cart_points(:,1:2))); % vertical (elevation) angle (rad)
pol_points= [rho,theta,alpha];

end